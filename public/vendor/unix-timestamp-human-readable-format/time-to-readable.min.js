/** Convert content of element with "data-ago" attribute (value = UNIX milliseconds), into readable format. */
function timeDifference(target, current = new Date()) {
    var msPerMinute = 60 * 1000;
    var msPerHour = msPerMinute * 60;
    var msPerDay = msPerHour * 24;
    var msPerMonth = msPerDay * 30;
    var msPerYear = msPerDay * 365;
    var elapsed = target - current;
    if (elapsed > 0) {
        if (elapsed < msPerMinute) {
            var nume = Math.round(elapsed / 1000);
            var unit = "second";
        } else if (elapsed < msPerHour) {
            var nume = Math.round(elapsed / msPerMinute);
            var unit = "minute";
        } else if (elapsed < msPerDay) {
            var nume = Math.round(elapsed / msPerHour);
            var unit = "hour";
        } else if (elapsed < msPerMonth) {
            var nume = Math.round(elapsed / msPerDay);
            var unit = "day";
        } else if (elapsed < msPerYear) {
            var nume = Math.round(elapsed / msPerMonth);
            var unit = "month";
        } else {
            var nume = Math.round(elapsed / msPerYear);
            var unit = "year";
        }
    } else {
        if (elapsed > -1 * msPerMinute) {
            var nume = Math.round(elapsed / 1000);
            var unit = "second";
        } else if (elapsed > -1 * msPerHour) {
            var nume = Math.round(elapsed / msPerMinute);
            var unit = "minute";
        } else if (elapsed > -1 * msPerDay) {
            var nume = Math.round(elapsed / msPerHour);
            var unit = "hour";
        } else if (elapsed > -1 * msPerMonth) {
            var nume = Math.round(elapsed / msPerDay);
            var unit = "day";
        } else if (elapsed > -1 * msPerYear) {
            var nume = Math.round(elapsed / msPerMonth);
            var unit = "month";
        } else {
            var nume = Math.round(elapsed / msPerYear);
            var unit = "year";
        }
    }
    const rtf = new Intl.RelativeTimeFormat();
    return rtf.format(nume, unit);
}
var elements = document.querySelectorAll("[data-ago]");
elements.forEach(function (element, index) {
    var timeAgo = timeDifference(element.getAttribute("data-ago"));
    element.innerHTML = timeAgo;
});
